<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row =>
                    row.some(cell => cell !== '' && cell !== null && cell !== undefined)
                );

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>موقع حفظ القصائد</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.9/babel.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            overflow-x: hidden;
        }
        .poem-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 16px;
        }
        .verse {
            margin-bottom: 16px;
            padding: 16px;
            border-right: 4px solid #4a90e2;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .verse:hover {
            transform: translateX(-5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .verse.memorized {
            background-color: #f0fff4;
            border-right-color: #28a745;
        }
        .verse p {
            font-family: 'Traditional Arabic', 'Amiri', serif;
            font-size: 1.25rem;
            line-height: 2;
            text-align: center;
            margin-bottom: 12px;
        }
        .verse-explanation {
            font-family: 'Traditional Arabic', 'Amiri', serif;
            font-size: 1rem;
            line-height: 1.8;
            text-align: right;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #e2e8f0;
            color: #4a5568;
        }
        .verse-explanation-toggle {
            font-size: 0.875rem;
            color: #4a5568;
            background-color: #f7fafc;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            border: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }
        .verse-explanation-toggle:hover {
            background-color: #edf2f7;
        }
        .dropdown {
            position: sticky;
            top: 10px;
            z-index: 10;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(5px);
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .progress-bar {
            height: 10px;
            background-color: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .progress-bar-fill {
            height: 100%;
            background-color: #28a745;
            transition: width 0.5s ease;
            background-image: linear-gradient(45deg, 
                rgba(255,255,255,.15) 25%, 
                transparent 25%, 
                transparent 50%, 
                rgba(255,255,255,.15) 50%, 
                rgba(255,255,255,.15) 75%, 
                transparent 75%, 
                transparent);
            background-size: 1rem 1rem;
            animation: progress-bar-stripes 1s linear infinite;
        }
        @keyframes progress-bar-stripes {
            from { background-position: 1rem 0; }
            to { background-position: 0 0; }
        }
        .tts-controls {
            background-color: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 24px;
        }
        .tts-controls input[type="range"] {
            height: 6px;
            border-radius: 3px;
            background: #e9ecef;
            outline: none;
            transition: background 0.3s;
        }
        .tts-controls input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #4a90e2;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tts-controls input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }
        .poem-title {
            font-family: 'Traditional Arabic', 'Amiri', serif;
            text-align: center;
            color: #2d3748;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e2e8f0;
            position: relative;
        }
        .poem-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 2px;
            background-color: #4a90e2;
        }
        /* Mobile-specific styles */
        @media (max-width: 640px) {
            .poem-container {
                padding: 12px;
            }
            .verse {
                padding: 6px;
                margin-bottom: 10px;
            }
            .verse p {
                font-size: 0.95rem;
            }
            .tts-controls label {
                font-size: 0.85rem;
            }
            .tts-warning {
                font-size: 0.8rem;
                padding: 6px;
            }
            .dropdown select {
                font-size: 0.9rem;
            }
            .progress-bar {
                height: 6px;
            }
            h1 {
                font-size: 1.5rem;
            }
            h2 {
                font-size: 1.25rem;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const poems = [
            {
                title: "داعية السلام (زهير بن أبي سلمى)",
                category: "حفظ",
                verses: [
                    "فَأَقْسَمْتُ بِالْبَيْتِ الَّذِي طَافَ حَوْلَهُ * رِجَالٌ بَنَوْهُ مِنْ قُرَيْشٍ وَجُرْهُمِ",
                    "يَمِينًا لَنِعْمَ السَّيِّدَانِ وُجِدْتُمَا * عَلَى كُلِّ حَالٍ مِنْ سَحِيلٍ وَمُبْرَمِ",
                    "تَدَارَكْتُمَا عَبْسًا وَدُبْيَانَ بَعْدَمَا * تَفَانَوْا وَدَقُّوا بَيْنَهُمْ عِطْرَ مَنْشَمِ",
                    "وَقَدْ قُلْتُمَا إِنْ نُدْرِكِ السِّلْمَ وَاسِعًا * بِمَالٍ وَمَعْرُوفٍ مِنَ الأَمْرِ نَسْلَمِ",
                    "أَلَا أَبْلِغِ الْأَحْلَافَ عَنِّي رِسَالَةً * وَدُبْيَانَ هَلْ أَقْسَمْتُمُ كُلَّ مُقْسَمِ",
                    "وَمَا الْحَرْبُ إِلَّا مَا عَلِمْتُمْ وَذُقْتُمُ * وَمَا هُوَ عَنْهَا بِالْحَدِيثِ الْمُرَجَّمِ",
                    "مَتَى تَبْعَثُوهَا تَبْعَثُوهَا ذَمِيمَةً * وَتَضْرَ إِذَا ضَرَّيْتُمُوهَا فَتَضْرَمِ",
                    "فَتَعْرُكْكُمُ عَرْكَ الرَّحَى بِثِفَالِهَا * وَتَلْقَحْ كِشَافًا ثُمَّ تُنْتَجْ فَتُتْئِمِ",
                    "فَتُنْتَجْ لَكُمْ غِلْمَانَ أَشْأَمَ كُلُّهُمْ * كَأَحْمَرِ عَادٍ ثُمَّ تُرْضِعْ فَتَفْطِمِ",
                    "فَتُغْلِلْ لَكُمْ مَا لَا تُغِلُّ لِأَهْلِهَا * قُرًى بِالْعِرَاقِ مِنْ قَفِيزٍ وَدِرْهَمِ"
                ],
                explanations: [
                    "المعنى: يقسم الشاعر بالبيت الحرام الذي بنته رجال من قريش وجرهم وطافوا حوله.",
                    "المعنى: يقسم الشاعر بأنهما (حصين بن ضم والمخاطب غائب وهو الحارث بن عوف) نعم السيدان في كل حال، في حال الشدة (السحيل) والرخاء (المبرم).",
                    "المعنى: لقد أدركتما عبسا وذبيان وأصلحتما بينهما بعد أن تفانوا في الحرب، ودقوا بينهم عطر منشم (امرأة عطارة كانت سببا في حرب البسوس) أي استعدوا للحرب استعدادا كاملا.",
                    "المعنى: وقد أعلنتما أنكما إن وجدتما سبيلا إلى السلم الواسع ستتبعانه، وذلك ببذل المال، والكلمة الطيبة (المعروف من الأمر) وبذلك تسلمان وتسلم القبيلتان.",
                    "المعنى: يخاطب الأحلاف (أسد وغطفان وحلفاؤهما) ويطلب إليهم أن يبلغوا رسالته إلى ذبيان ويسألوهم: هل أقسمتم على كل مقسم من الوفاء بالعهد؟",
                    "المعنى: إن الحرب كما عرفتموها وذقتم مرارتها، وليست بالأمر الذي يخفى أو يجهل بالحديث الظني (المرجم).",
                    "المعنى: متى بدأتم الحرب وأثرتموها كانت مذمومة العواقب، ومتى أشعلتم نارها اشتعلت بكم واكتويتم بها.",
                    "المعنى: فتطحنكم الحرب طحن الرحى للحبوب، وتلقح بالشرور وتأتي بالبلاء (الكشاف)، ثم تنتج لكم توائم الشرور.",
                    "المعنى: فتلد لكم الحرب أبناء الشؤم، كلهم مشائيم، أشأم من أحمر ثمود عاقر الناقة، ثم ترضعهم اللؤم وتفطمهم عليه.",
                    "المعنى: فتجني عليكم الحرب خسائر فادحة لا تجنيها لكم أرض قريبة مثل قرى العراق من قفيز قمح ودرهم فضة."
                ]
            },
            {
                title: "فارس بني عبس (عنترة بن شداد)",
                category: "حفظ",
                verses: [
                    "إِنْ تُغْدِفِي دُونِيَ الْقِنَاعَ فَإِنَّنِي * طَبٌّ بِأَخْذِ الْفَارِسِ الْمُسْتَلْئِمِ",
                    "أَثْنِي عَلَيَّ بِمَا عَلِمْتِ، فَإِنَّنِي * سَمْحٌ مُخَالَقَتِي، إِذَا لَمْ أُظْلَمِ",
                    "فَإِذَا ظُلِمْتُ فَإِنَّ ظُلْمِي بَاسِلٌ * مُرٌّ مَذَاقَتُهُ كَطَعْمِ الْعَلْقَمِ",
                    "هَلَّا سَأَلْتِ الْخَيْلَ يَا ابْنَةَ مَالِكٍ * إِنْ كُنْتِ جَاهِلَةً بِمَا لَمْ تَعْلَمِي",
                    "إِذْ لَا أَزَالُ عَلَى رِحَالَةِ سَابِحٍ * نَهْدٍ، تُعَاوِرُهُ الْكُمَاةُ مُكَلَّمِ",
                    "طَوْرًا يُجَرَّدُ لِلطِّعَانِ وَتَارَةً * يَأْوِي إِلَى حَصِدِ الْقِسِيِّ عَرَمْرَمِ",
                    "يُخْبِرْكِ مَنْ شَهِدَ الْوَقِيعَةَ أَنَّنِي * أَغْشَى الْوَغَى، وَأَعِفُّ عِنْدَ الْمَغْنَمِ",
                    "وَمُدَجَّجٍ كَرِهَ الْكُمَاةُ نِزَالَهُ * لَا مُمْعِنٍ، هَرَبًا وَلَا مُسْتَسْلِمِ",
                    "جَادَتْ لَهُ كَفِّي بِعَاجِلِ طَعْنَةٍ * بِمُثَقَّفٍ صَدْقِ الْكُعُوبِ مُقَوَّمِ",
                    "بِرَحِيبَةِ الْفَرْغَيْنِ يَهْدِي جَرْسُهَا * بِاللَّيْلِ مُعْتَسَّ الذِّئَابِ الضُّرَّمِ"
                ],
                explanations: [
                    "المعنى: ترخي يقال : أخذت المرأة قناعها إذا أرخته على وجهها ، وحسر : حادق ، ومنه الطبيب أي الماهر .",
                    "المعنى: يقول مخاطبا محبوبته عبلة : إذا استترت عني واحتجبت ، فإنني خبير حاذق بقتال الفرسان المدججين بالسلاح ، أي لا ينبغي لك أن تترهبي في وأنا الفارس الشجاع الذي يهزم الفرسان المدرعين .",
                    "المعنى: فإذا ظلمت فإن ظلمي باسل * مر مذاقته كطعم العلقم",
                    "المعنى: يقول لعبلة : اذكري محاسني ، فإذا لم تكوني تعرفينها ، فإني حسن المعاشرة للناس شريطة ألا يمسني أحد بظلم ، وإلا يهضم حقي إنسان .",
                    "المعنى: سابح : فرس كريم ، نهد : ضخم ، تعاوره : تداوله الكماة (الشجعان) مكلم : مجرح . يفتخر بشجاعته .",
                    "المعنى: الحصيد : المحكم ، القسي : جمع قوس ، وهو من آلات الحرب تقذف بها السهام .",
                    "المعنى: يخبرك من شهد الوقيعة أنني * أغشى الوغى وأعف عند المغنم (وهذه من شيم الفرسان)",
                    "المعنى: المدجج : الفارس الكامل السلاح الكماة : الفرسان نزاله : مقابلته في الحرب . ممعن : متباعد في الهرب .",
                    "المعنى: جادت يدي له بطعنة سريعة برمح مستقيم صلب العقد.",
                    "المعنى: رحيبة الفرغين : واسعة مجرى السهم ، والجرس : الصوت الخفي ، معتس : طالب ، الضرم : الجائعة ."
                ]
            },
            {
                title: "قيم ومثل (لبيد بن ربيعة العامري)",
                category: "حفظ",
                verses: [
                    "إِذَا الْمَرْءُ لَمْ يَدْنَسْ مِنَ اللُّؤْمِ عِرْضُهُ * فَكُلُّ رِدَاءٍ يَرْتَدِيهِ جَمِيلُ",
                    "وَإِنْ هُوَ لَمْ يَحْمِلْ عَلَى النَّفْسِ ضَيْمَهَا * فَلَيْسَ إِلَى حُسْنِ الثَّنَاءِ سَبِيلُ",
                    "تُعَيِّرُنَا أَنَّا قَلِيلٌ عَدِيدُنَا * فَقُلْتُ لَهَا إِنَّ الْكِرَامَ قَلِيلُ",
                    "وَمَا قَلَّ مَنْ كَانَتْ بَقَايَاهُ مِثْلَنَا * شَبَابٌ تَسَامَى لِلْعُلَا وَكُهُولُ",
                    "وَمَا ضَرَّنَا أَنَّا قَلِيلٌ وَجَارُنَا * عَزِيزٌ وَجَارُ الْأَكْثَرِينَ ذَلِيلُ",
                    "لَنَا جَبَلٌ يَحْتَلُّهُ مَنْ نُجِيرُهُ * مَنِيعٌ يَرُدُّ الطَّرْفَ وَهُوَ كَلِيلُ",
                    "يُقَرِّبُ حُبُّ الْمَوْتِ آجَالَنَا لَنَا * وَتَكْرَهُهُ آجَالُهُمْ فَتَطُولُ",
                    "وَمَا مَاتَ مِنَّا سَيِّدٌ حَتْفَ أَنْفِهِ * وَلَا طُلَّ مِنَّا حَيْثُ كَانَ قَتِيلُ",
                    "تَسِيلُ عَلَى حَدِّ الظُّبَاتِ نُفُوسُنَا * وَلَيْسَتْ عَلَى غَيْرِ الظُّبَاتِ تَسِيلُ",
                    "وَتُنْكِرُ إِنْ شِئْنَا عَلَى النَّاسِ قَوْلَهُمْ * وَلَا يُنْكِرُونَ الْقَوْلَ حِينَ نَقُولُ",
                    "إِذَا سَيِّدٌ مِنَّا خَلَا قَامَ سَيِّدٌ * قَؤُولٌ لِمَا قَالَ الْكِرَامُ فَعُولُ",
                    "وَمَا أُخْمِدَتْ نَارٌ لَنَا دُونَ طَارِقٍ * وَلَا ذَمَّنَا فِي النَّازِلِينَ نَزِيلُ",
                    "سَلِي إِنْ جَهِلْتِ النَّاسَ عَنَّا وَعَنْهُمُ * فَلَيْسَ سَوَاءً عَالِمٌ وَجَهُولُ"
                ],
                explanations: [
                    "المعنى: إِذَا لَمْ يَتَلَوَّثْ عِرْضُ الْمَرْءِ بِاللُّؤْمِ فَإِنَّ كُلَّ ثَوْبٍ يَلْبَسُهُ جَمِيلٌ أَيْ أَنَّ صَوْنَ الْعِرْضِ أَجْمَلُ زِينَةٍ.",
                    "المعنى: وَإِنْ لَمْ يَصْبِرِ الْمَرْءُ عَلَى تَحَمُّلِ الْمَشَاقِّ وَيَحْتَمِلِ الذُّلَّ فَإِنَّهُ لَا يَصِلُ إِلَى حُسْنِ السُّمْعَةِ وَالثَّنَاءِ.",
                    "المعنى: تَلُومُنَا مَحْبُوبَتُهُ لِقِلَّةِ عَدَدِنَا فَيَرُدُّ عَلَيْهَا بِأَنَّ الْكِرَامَ دَائِمًا قَلِيلُونَ.",
                    "المعنى: وَلَا يُعْتَبَرُ قَلِيلًا مَنْ كَانَ مِثْلَنَا لَهُ أَبْنَاءُ شَبَابٍ وَكُهُولٌ يَتَطَلَّعُونَ إِلَى مَعَالِي الْأُمُورِ.",
                    "المعنى: وَلَا يَضِيرُنَا أَنْ يَكُونَ عَدَدُنَا قَلِيلًا، لِأَنَّ جَارَنَا يَعِيشُ فِي عِزَّةٍ وَمَنَعَةٍ، بَيْنَمَا جَارُ الْقَبَائِلِ الْكَثِيرَةِ الْعَدَدِ ذَلِيلٌ مُهَانٌ.",
                    "المعنى: لَنَا مَكَانَةٌ مَنِيعَةٌ كَالْجَبَلِ نَمْنَعُ بِهَا مَنِ اسْتَجَارَ بِنَا، فَهِيَ مَنَعَةٌ تَرُدُّ نَظَرَ الْعَدُوِّ ذَلِيلًا حَسِيرًا.",
                    "المعنى: حُبُّنَا لِلْمَوْتِ وَشَجَاعَتُنَا فِي الْقِتَالِ تُقَرِّبُ آجَالَنَا، بَيْنَمَا هُمْ يَكْرَهُونَ الْمَوْتَ فَتَطُولُ أَعْمَارُهُمْ فِي ذُلٍّ.",
                    "المعنى: وَمَا مَاتَ مِنَّا سَيِّدٌ حَتْفَ أَنْفِهِ * وَلَا طُلَّ مِنَّا حَيْثُ كَانَ قَتِيلُ",
                    "المعنى: تَسِيلُ دِمَاؤُنَا عَلَى أَسِنَّةِ الرِّمَاحِ فِي الْحَرْبِ، وَلَا تَسِيلُ إِلَّا فِي مَوَاطِنِ الْعِزِّ وَالشَّرَفِ.",
                    "المعنى: وَنَحْنُ سَادَةٌ نَفْرِضُ رَأْيَنَا عَلَى النَّاسِ، وَلَا يَجْرُؤُ أَحَدٌ عَلَى إِنْكَارِهِ، بَيْنَمَا لَا نُنْكِرُ نَحْنُ أَقْوَالَ السَّادَةِ مِنْهُمْ.",
                    "المعنى: إِذَا مَاتَ مِنَّا سَيِّدٌ خَلَفَهُ سَيِّدٌ آخَرُ يَقُولُ وَيَفْعَلُ فِعْلَ الْكِرَامِ مِنْ أَسْلَافِهِ.",
                    "المعنى: لَا تَنْطَفِئُ نِيرَانُنَا الَّتِي نُوقِدُهَا لِإِكْرَامِ الضُّيُوفِ، وَلَمْ يَذُمَّنَا ضَيْفٌ نَزَلَ بِنَا.",
                    "المعنى: إِنْ لَمْ تَعْرِفِي حَقِيقَتَنَا وَحَقِيقَةَ غَيْرِنَا فَاسْأَلِي النَّاسَ عَنَّا وَعَنْهُمْ، فَلَا يَسْتَوِي الْعُلَمَاءُ وَالْجُهَلَاءُ."
                ]
            },
            {
                title: "يوم الفرقان (حسان بن ثابت)",
                category: "حفظ",
                verses: [
                    "عَرَفْتُ دِيَارَ زَيْنَبَ بِالْكَثِيبِ * كَخَطِّ الْوَحْيِ فِي الرَّقِّ الْقَشِيبِ",
                    "فَدَعْ عَنْكَ التَّذَكُّرَ كُلَّ يَوْمٍ * وَرُدَّ حَرَارَةَ الصَّدْرِ الْكَئِيبِ",
                    "وَخَبِّرْ بِالَّذِي لَا عَيْبَ فِيهِ * بِصِدْقٍ، غَيْرَ إِخْبَارِ الْكَذُوبِ",
                    "بِمَا صَنَعَ الْمَلِيكُ غَدَاةَ بَدْرٍ * لَنَا فِي الْمُشْرِكِينَ مِنَ النَّصِيبِ",
                    "غَدَاةَ كَأَنَّ جَمْعَهُمُ حِرَاءٌ * بَدَتْ أَرْكَانُهُ جُنْحَ الْغُرُوبِ",
                    "فَلَاقَيْنَاهُمُ مِنَّا بِجَمْعٍ * كَأُسْدِ الْغَابِ: مُرْدَانٍ وَشِيبِ",
                    "أَمَامَ مُحَمَّدٍ قَدْ آزَرُوهُ * عَلَى الْأَعْدَاءِ فِي رَهَجِ الْحُرُوبِ",
                    "فَعَادَرَا أَبَا جَهْلٍ صَرِيعًا * وَعُتْبَةَ قَدْ تَرَكْنَا فِي الْجَبُوبِ",
                    "وَشَيْبَةَ قَدْ تَرَكْنَا فِي رِجَالٍ * ذَوِي حَسَبٍ، إِذَا نُسِبُوا، حَسِيبِ",
                    "يُنَادِيهِمْ رَسُولُ اللَّهِ لَمَّا * قَذَفْنَاهُمْ كَبَاكِبَ فِي الْقَلِيبِ",
                    "أَلَمْ تَجِدُوا حَدِيثِي كَانَ حَقًّا * وَأَمْرُ اللَّهِ يَأْخُذُ بِالْقُلُوبِ"
                ],
                explanations: [
                    "المعنى: عَرَفْتُ دِيَارَ زَيْنَبَ بِهَذَا الْمَوْضِعِ وَكَانَ ظَاهِرًا كَالْكِتَابَةِ عَلَى جِلْدٍ رَقِيقٍ.",
                    "المعنى: فَاتْرُكْ مُدَاوَمَةَ التَّذَكُّرِ لِهَذِهِ الْحَبِيبَةِ، وَأَبْعِدْ مَا يَعْتَمِلُ فِي صَدْرِكَ مِنْ حَرَارَةٍ لِبُعْدِهَا.",
                    "المعنى: وَأَخْبِرْ بِذَلِكَ الْأَخْبَارِ الَّتِي لَا يُعَابُ الْمَرْءُ بِهَا وَهِيَ أَخْبَارٌ صَادِقَةٌ لَا كَذِبَ فِيهَا.",
                    "المعنى: وَهِيَ مَا صَنَعَهُ اللَّهُ يَوْمَ بَدْرٍ مِنَ النَّصْرِ عَلَى الْمُشْرِكِينَ.",
                    "المعنى: عِنْدَمَا تَجَمَّعُوا وَاحْتَشَدُوا حَتَّى بَدَتْ صُورَتُهُمْ فِي ضَخَامَةِ عَدَدِهِمْ كَجَبَلِ حِرَاءٍ عِنْدَ الْغُرُوبِ.",
                    "المعنى: وَقَابَلْنَاهُمْ بِجَيْشٍ رِجَالُهُ مِثْلُ الْأُسُودِ شَجَاعَةً وَبَسَالَةً سَوَاءٌ مِنْهُمُ الْكِبَارُ وَالصِّغَارُ.",
                    "المعنى: وَسَارُوا أَمَامَ رَسُولِ اللَّهِ ﷺ مُؤَازِرِينَ مُنَاصِرِينَ عَلَى الْأَعْدَاءِ وَقَدْ عَلَاهُمْ غُبَارُ الْحَرْبِ.",
                    "المعنى: فَتَرَكْنَا أَبَا جَهْلٍ صَرِيعًا مُضَرَّجًا بِدِمَائِهِ وَعُتْبَةَ مُجَنْدَلًا فِي التُّرَابِ.",
                    "المعنى: وَتَرَكْنَا أَخَاهُ شَيْبَةَ قَتِيلًا مَعَ رِجَالٍ ذَوِي نَسَبٍ وَحَسَبٍ.",
                    "المعنى: تَوَقَّفَ عَلَيْهِمْ رَسُولُ اللَّهِ ﷺ، عِنْدَمَا أَلْقَيْنَا بِهِمْ جَمَاعَاتٍ جَمَاعَاتٍ فِي الْقَلِيبِ مُخَاطِبًا إِيَّاهُمْ:",
                    "المعنى: أَلَمْ تَجِدُوا مَا كُنْتُ أَقُولُهُ لَكُمْ حَقًّا وَصِدْقًا، وَقَدْ أَخَذَكُمُ الْآنَ أَمْرُ اللَّهِ ؟"
                ]
            },
            {
                title: "علمت نفسي مكان دوائيا (قيس بن الملوح العامري)",
                category: "حفظ",
                verses: [
                    "يَا حَمَامَتَيْ بَطْنِ وَدَّانَ إِنَّكُمَا * هَيَّجْتُمَا لِيَ أَحْزَانًا وَمَا بِيَا",
                    "وَأَبْكَيْتُمَانِي فِي الْمَجَالِسِ وَسْطَ مَنْ * أُحَاذِرُ، مَا كُنْتُ الْبُكَاءَ بِدَائِيَا",
                    "أَلَا أَيُّهَا الرَّكْبُ الْيَمَانُونَ عُوجُوا * فَقَدْ صَارَ لِي مِنْ حُبِّ لَيْلَى يَمَانِيَا",
                    "أُسَائِلُكُمْ هَلْ سَالَ وَادِي نُعْمَانَ * بَعْدَنَا فَإِنِّي لِوَادِي نُعْمَانَ هَاوِيَا",
                    "وَقَدْ صِرْتُ أَسْتَعْدِي اللَّيَالِيَ بَعْدَمَا * مَضَى زَمَنٌ لَا أَسْتَعِدُّ اللَّيَالِيَا",
                    "تَمُرُّ اللَّيَالِي وَالشُّهُورُ وَحُبُّكُمْ * كَمَا كَانَ لَا تَزْدَادُ إِلَّا تَمَادِيَا",
                    "خَلِيلَيَّ إِنْ دَارَتْ عَلَى أُمِّ مَالِكٍ * رَحَى الْمَوْتِ فَابْغِيَا لِيَ النَّعْيَ نَاعِيَا",
                    "فَوَاللَّهِ مَا أَمْلِكُ الَّذِي قَضَى اللَّهُ فِي لَيْلَى * وَلَا مَا قَضَى اللَّهُ فِيَا",
                    "قَضَى اللَّهُ أَنْ أَهْوَى وَتَهْوَى فَلَيْتَنِي * ابْتُلِيتُ بِشَيْءٍ غَيْرِ لَيْلَى ابْتِلَائِيَا",
                    "حَرَامٌ زِيَارَاتِي وَقَدْ حَدَبَتْ بِهَا * وَهَلْ عَلَيْهَا إِنْ رَأَتْنِي تَدَانِيَا",
                    "وَإِنَّ الْوُشَاةَ الْمُفْسِدِينَ وَإِنْ نَأَوْا * لَيَلْقَوْنَ مِنِّي مَنْطِقًا لَا مُدَارِيَا",
                    "أَخَافُ بِأَنْ أَلْقَى الْمَنِيَّةَ بَغْتَةً * وَفِي النَّفْسِ حَاجَاتٌ إِلَيْكِ كَمَا هِيَا",
                    "إِذَا جِئْتُ أَبْغِي الْقَوْلَ أَعْيَتْ بَوَادِرُهُ * عَلَيَّ وَكَانَ الصَّمْتُ مِنِّي جَوَابِيَا",
                    "يَقُولُونَ لَيْلَى بِالْعِرَاقِ مَرِيضَةٌ * فَيَا لَيْتَنِي كُنْتُ الطَّبِيبَ الْمُدَاوِيَا"
                ],
                explanations: [
                    "المعنى: يُخَاطِبُ حَمَامَتَيْ بَطْنِ وَدَّانَ بِأَنَّهُمَا قَدْ هَيَّجَا عَلَيْهِ الْهَوَى عِنْدَمَا غَنَّيَا لَهُ.",
                    "المعنى: وَجَعَلْتُمَانِي أَبْكِي وَسْطَ أَهْلِي وَمَا كُنْتُ أُبَالِي بِالْبُكَاءِ عِنْدَمَا أَكُونُ مُنْفَرِدًا بِنَفْسِي.",
                    "المعنى: وَيَطْلُبُ مِنَ الرَّكْبِ الْآتِي مِنَ الْيَمَنِ أَنْ يُعَرِّجَ عَلَيْهِ فَقَدْ أَصْبَحَ حُبُّهُ يَمَانِيًا.",
                    "المعنى: وَيُدَاوِمُ سُؤَالَهُمْ عَنْ وَادِي نُعْمَانَ هَلْ سَالَ بَعْدَهُ وَهُوَ مُحِبٌّ لِهَذَا الْوَادِي لِمَا يَحْمِلُهُ مِنْ ذِكْرَيَاتِ حُبِّهِ وَلِقَاءَاتِ حَبِيبَتِهِ.",
                    "المعنى: وَقَدْ أَصْبَحْتُ أَعُدُّ اللَّيَالِيَ شَوْقًا وَقَدْ مَضَى عَلَيَّ دَهْرٌ لَا أَعُدُّ فِيهِ اللَّيَالِيَ حَتَّى أَنْعَمَ بِلِقَاءِ الْحَبِيبِ.",
                    "المعنى: إِنَّ الشُّهُورَ وَالْأَيَّامَ لَتَمْضِي وَتَنْقَضِي وَحُبُّكِ ثَابِتٌ فِي قَلْبِي مُشْتَعِلٌ فِي فُؤَادِي وَلَا تَزِيدُهُ اللَّيَالِي إِلَّا تَمَادِيًا.",
                    "المعنى: وَيَطْلُبُ مِنْ صَاحِبَيْهِ أَنْ يَبْغِيَا لَهُ نَاعِيًا يَنْعَاهُ إِنْ دَارَتِ الْأَيَّامُ عَلَى حَبِيبَتِهِ أُمِّ مَالِكٍ لِأَنَّهُ لَنْ يَسْتَطِيعَ الْعَيْشَ بَعْدَهَا.",
                    "المعنى: وَيُوَضِّحُ لَهُمَا مُقْسِمًا بِاللَّهِ لَا يَمْلِكُ مَا قَضَى اللَّهُ بِهِ فِي لَيْلَى وَلَا مَا قَضَى فِيهِ.",
                    "المعنى: فَقَدْ قُضِيَ أَنْ تَكُونَ لِغَيْرِهِ وَابْتَلَاهُ بِحُبِّهَا، وَيَتَسَاءَلُ مُلِحًّا فِي السُّؤَالِ هَلَّا كَانَ ابْتِلَاؤُهُ بِشَيْءٍ غَيْرِ لَيْلَى.",
                    "المعنى: وَقَدْ حُرِّمَتْ زِيَارَتُهُ لَهَا لِأَنَّهَا قَدْ حَدَبَتْ عَنْهُ، وَهَلْ هُنَاكَ مِنْ ذَنْبٍ عَلَيْهَا إِذَا رَأَتْنِي.",
                    "المعنى: وَإِنَّ الْوَاشِينَ يُفْسِدُونَ دَائِمًا مَا بَيْنَنَا وَلَوْ أَنَّ أَحَدَهُمْ يَعِيشُ فِي الْيَمَامَةِ وَكُنْتُ بِحَضْرَمَوْتَ لَأَهْتَدِيَ لِي مَعَ بُعْدِ الْمَسَافَةِ بَيْنَ الْمَكَانَيْنِ.",
                    "المعنى: وَيَخْشَى أَنْ يَأْتِيَهُ الْمَوْتُ فَجْأَةً وَلَا زَالَ هُنَاكَ الْكَثِيرُ الَّذِي يُرِيدُ أَنْ يَبُثَّهُ لَهَا.",
                    "المعنى: وَإِنَّهُ كُلَّمَا أَلْقَاهَا انْعَقَدَ لِسَانُهُ فَلَا يَسْتَطِيعُ أَنْ يَتَحَدَّثَ إِلَيْهَا بِمَا يُرِيدُ.",
                    "المعنى: وَقَالَ النَّاسُ عَنْهُ : إِنَّهُ قَدْ أُصِيبَ بِدَاءٍ عُضَالٍ، وَكَأَنَّهُ يَعْلَمُ مَكَانَ شِفَائِهِ وَدَوَائِهِ."
                ]
            },
            {
                title: "في الفخر والمدح (النابغة الجعدي)",
                category: "شرح",
                verses: [
                    "أَبَيْتُ عَلَى مَحَارِمِهِمْ وَأَحْمِي * سَوَامَهُمْ وَأَحْمِلُ عَنْ غَرِيمِ",
                    "وَأَغْفِرُ عَوْرَةَ الْخِلِّ وَأَرْعَى * ذِمَامَ الْجَارِ وَالرَّجُلِ الْحَرِيمِ",
                    "وَأَحْفَظُ مَا اسْتُودِعْتُ سِرَّ أَمَانَةٍ * وَأَحْفَظُ جَارِي أَنْ يُضَامَ وَيُظْلَمَا",
                    "وَأَكْرَهُ أَنْ يُرَى بِي مِنْ صَدِيقٍ * أَذًى أَوْ أَنْ أَكُونَ لَهُ غَرِيمَا",
                    "وَأَحْمِلُ هَمَّ الْقَوْمِ إِنْ جَدَّ جِدُّهُمْ * وَأَسْبِقُهُمْ بِالْخَيْرِ إِنْ هُمْ قَدَّمُوا",
                    "وَأَصْفَحُ عَنْ شَتْمِ اللَّئِيمِ تَكَرُّمًا * وَأَعْرِضُ عَنْ ذَمِّ الرِّجَالِ تَكَرُّمَا",
                    "وَأُوفِي بِعَهْدِي مَا حَيِيتُ وَإِنَّمَا * يُوَفِّي بِعَهْدِ اللَّهِ مَنْ كَانَ مُسْلِمَا",
                    "وَأَحْمِلُ عَنْ قَوْمِي إِذَا مَا تَحَمَّلُوا * وَأَرْعَى ذِمَامَ الْجَارِ إِنْ كَانَ مُسْلِمَا",
                    "وَأَصْبِرُ لِلْبَلْوَى وَأَرْجُو ثَوَابَهَا * وَأَعْلَمُ أَنَّ اللَّهَ يَجْزِي الْمُحَسِّنَا",
                    "وَأَعْلَمُ أَنَّ اللَّهَ لَا شَيْءَ غَيْرُهُ * وَأَنَّ لَهُ فِي كُلِّ نَفْسٍ عَلَامَةً"
                ],
                explanations: [
                    "يفتخر بحمايته لمحارم قومه وأموالهم، ومساعدته للمدين",
                    "يؤكد تسامحه مع أخطاء الأصدقاء وحمايته لحقوق الجار والمحترم",
                    "يفتخر بحفظه للأمانات والأسرار وحماية جاره من الظلم",
                    "يكره أن يؤذي صديقه أو أن يكون سبباً في مديونيته",
                    "يحمل هموم قومه في الشدائد ويسبقهم إلى فعل الخير",
                    "يتجاوز عن شتم اللئيم وذم الرجال تكرماً",
                    "يؤكد وفاءه بعهده ما دام حياً، رابطاً ذلك بالإسلام",
                    "يتحمل المسؤولية عن قومه ويرعى حق الجار المسلم",
                    "يصبر على البلاء راجياً ثواب الله ومؤمناً بجزائه للمحسنين",
                    "يؤكد إيمانه بوحدانية الله وعلمه بكل نفس"
                ]
            },
            {
                title: "جرير يمدح عبد الملك بن مروان (جرير بن عطية)",
                category: "شرح",
                verses: [
                    "أَلَسْتُمْ خَيْرَ مَنْ رَكِبَ الْمَطَايَا * وَأَنْدَى الْعَالَمِينَ بُطُونَ رَاحِ",
                    "وَأَوْفَى النَّاسِ إِذْ عَقَدُوا ذِمَامًا * وَأَكْرَمَ مَنْ أَجَارَ مِنَ الْجِرَاحِ",
                    "وَأَمْنَعَ مَنْ أَرَادَ الضَّيْمَ مِنْهُمْ * وَأَرْأَفَ بِالْيَتِيمِ وَبِالسَّمَاحِ",
                    "وَأَكْثَرَ مِنْكُمُ قَتْلًا لِعَادٍ * وَأَضْرَبَ بِالسُّيُوفِ مِنَ الرِّمَاحِ",
                    "وَأَحْسَنَ فِي الْمَوَاطِنِ كُلِّ ثَغْرٍ * وَأَكْرَمَ مَنْ يَطِيرُ إِلَى الْكِفَاحِ",
                    "وَأَكْثَرَ مِنْكُمُ بِيضًا حِسَانًا * وَأَكْرَمَ مَنْ يَمْشِي إِلَى الصَّبَاحِ",
                    "وَأَطْوَلَ مِنْكُمُ رُمْحًا وَبَاعًا * وَأَكْرَمَ مَنْ يَسِيرُ إِلَى النَّجَاحِ",
                    "وَأَحْلَمَ مَنْ إِذَا نَزَلَ الْقَضَاءُ * وَأَصْبَرَ تَحْتَ أَطْرَافِ الرِّمَاحِ",
                    "وَأَكْرَمَ مَنْ إِذَا رَكِبَ الْمَطَايَا * وَأَسْرَعَ مَنْ يَسِيرُ إِلَى الصَّلَاحِ",
                    "وَأَكْرَمَ مَنْ إِذَا نَزَلَ الْبَلَاءُ * وَأَصْبَرَ تَحْتَ أَطْرَافِ الرِّمَاحِ"
                ],
                explanations: [
                    "يمدح الشاعر بني أمية بأنهم خير من ركب الإبل وأكثر الناس كرماً وعطاءً",
                    "يصفهم بالوفاء بالعهود وحماية من يستجير بهم",
                    "يمدحهم بمنع الظلم عن أنفسهم والرأفة باليتيم والكرم",
                    "يشيد بقوتهم في القتال وبراعتهم في استخدام السيوف والرماح",
                    "يمدح شجاعتهم في المعارك وكرمهم في القتال",
                    "يشيد بجمال نسائهم وكرم من يسعى للمجد",
                    "يصف طول رماحهم وباعهم وكرم من يسعى للنجاح",
                    "يمدح حلمهم عند نزول القضاء وصبرهم في المعارك",
                    "يكرر مدحهم بالكرم في السفر والمسارعة إلى الصلاح",
                    "يختم بمدح صبرهم عند البلاء وثباتهم في المعارك"
                ]
            },
            {
                title: "في النفس حاجات (جميل بن معمر)",
                category: "حفظ",
                verses: [
                    "وَمَا زِلْتُ بِي يَا بُثْنَ حَتَّى لَوْ أَنَّنِي * أُهِيجُ قَطَا نَجْدٍ لَهَاجَ لِيَا",
                    "وَلَوْ أَنَّ رِجْلِي أَصَابَهَا عُذْرُ عَائِدٍ * لَكُنْتِ أَنْتِ الْحَبِيبَ الَّذِي أَسْتَشْفِي بِهِ",
                    "وَمَا زَادَنِي النَّأْيُ الْمُبِينُ صَبَابَةً * إِلَيْكُمْ وَلَا طُولُ اجْتِنَابِكُمُ لِيَا",
                    "وَلَا زَادَنِي الْوَاشُونَ إِلَّا صَبَابَةً * إِلَيْكُمْ وَلَا النَّاهُونَ إِلَّا تَمَادِيَا",
                    "وَأَنْتِ الَّتِي إِنْ شِئْتِ أَشْقَيْتِ عِيشَتِي * وَإِنْ شِئْتِ بَعْدَ اللَّهِ أَنْعَمْتِ بَالِيَا",
                    "فَمَا لَكَ مِنْ صَبٍّ يَرَاكَ مُتَيَّمًا * وَلَا لَكَ مِنْ عَادٍ يَرَاكَ كَمَا هِيَا",
                    "أَخَافُ بِأَنْ أَلْقَى الْمَنِيَّةَ بَغْتَةً * وَفِي النَّفْسِ حَاجَاتٌ إِلَيْكِ كَمَا هِيَا"
                ],
                explanations: [
                    "المعنى: مَا زَالَ حُبِّي يَا بُثَيْنَةُ حَتَّى لَوْ أَنَّنِي – مِنْ شَوْقِي إِلَيْكُمْ – أَهَيَجْتُ الْحَمَامَ وَطَلَبْتُ مِنْهُ الْبُكَاءَ لَبَكَى لِي.",
                    "المعنى: وَإِذَا أَصَابَ رِجْلِي الْعُذْرُ وَقِيلَ إِنَّهَا تَشْفَى بِدُعَاءِ الْحَبِيبِ لَكُنْتِ أَنْتِ الْحَبِيبَ الَّذِي أَسْتَشْفِي بِدُعَائِهِ.",
                    "المعنى: وَإِنَّ حُبِّي لَكُمْ ثَابِتٌ وَلَا يَحْمِلُنِي بُعْدُكُمْ سُلُوًّا عَنْكُمْ وَلَا بُغْضًا لَكُمْ.",
                    "المعنى: وَلَمْ يَزِدْنِي الْوَاشُونَ بَيْنَنَا إِلَّا شَوْقًا لَكُمْ وَتَعَلُّقًا بِكُمْ، وَلَمْ تَزِدْنِي كَثْرَةُ النَّاهِينَ لِي عَنْ حُبِّكُمْ إِلَّا تَمَادِيًا وَاسْتِمْرَارًا.",
                    "المعنى: وَأَنْتِ الَّتِي تَمْلِكِينَ أَمْرِي وَتُسْعِدِينَنِي أَوْ تُشْقِينَنِي بَعْدَ اللَّهِ.",
                    "المعنى: وَمَا مِنْ صَدِيقٍ أَوْ عَدُوٍّ يَرَى حَالَتِي وَهُزَالِي، إِلَّا كُنْتُ مَدْعَاةَ رِثَاءٍ مِنْهُ وَهَذَا كُلُّهُ بِسَبَبِكِ أَنْتِ.",
                    "المعنى: وَأَكْثَرُ مَا أَخْشَاهُ أَنْ تَأْتِيَنِي مَنِيَّتِي بَغْتَةً وَلَمْ أَسْتَطِعْ أَنْ أَبُوحَ بِكُلِّ مَا فِي نَفْسِي."
                ]
            },
            {
                title: "كيف لي بالصبر (برة بنت الحارث)",
                category: "شرح",
                verses: [
                    // ... existing verses ...
                ],
                explanations: [
                    // ... existing explanations ...
                ]
            },
            {
                title: "لم يك وقافا (دريد بن الصمة)",
                category: "شرح",
                verses: [
                    "لَمْ يَكُ وَقَّافًا وَلَا مُتَلَوِّمًا ... يَوْمَ الْكَرِيهَةِ إِذْ خَالِدٌ قَدْ تَقَدَّمَا",
                    "فَقُلْتُ لَهُ: يَا خَالِدُ لَا تَعْجَلَنْ ... فَإِنَّ وَرَاءَ الْعَجْلِ مَا قَدْ تَنَدَّمَا",
                    "فَلَمْ يَسْتَجِبْ لِي إِذْ دَعَوْتُ وَلَمْ يَكُنْ ... لِيَسْمَعَ قَوْلًا غَيْرَ مَا قَدْ تَصَمَّمَا",
                    "فَلَمَّا عَصَانِي كَانَ مِنْ دُونِ رَدِّهِ ... قَنًا زُرْقٌ تَخْطِرُ أَوْ تَتَقَوَّمَا",
                    "فَقُلْتُ لَهُمْ: خَلُّوا الطَّرِيقَ فَإِنَّنِي ... أَخُو الْحَرْبِ إِنْ عَضَّتْ بِهِ الْحَرْبُ صَمَّمَا",
                    "فَلَمَّا رَأَيْتُ الْخَيْلَ زَوْرًا كَأَنَّهَا ... قَطًا الْحَزْنِ قَدْ كَانَتْ فِرَاخًا وَجُثَّمَا",
                    "عَطَفْتُ عَلَيْهِ الْخَيْلَ حَتَّى تَبَدَّدَتْ ... كَمَا طَارَ سِرْبُ الْقَطَا لَاقَى جَهَنَّمَا",
                    "فَلَوْ كَانَ سَمْعًا أَوْ أَطَاعَ مُنَادِيًا ... لَنَجَّى وَلَكِنْ قَدْ أَرَادَ التَّقَدُّمَا",
                    "فَإِنْ تَكُ غَوِيٌّ قَدْ أَصَابَ مَنِيَّةً ... فَمَا كَانَ وَقَّافًا وَلَا مُتَلَوِّمَا",
                    "وَإِنِّي لَعَمْرُ اللهِ أَعْلَمُ أَنَّهُ ... سَيَتْبَعُ مَنْ وَلَّى الدَّبُورَ الْمُقَدَّمَا",
                    "وَمَا كُنْتُ أَخْشَى أَنْ أَكُونَ جُنَادِفًا ... عَلَى النَّاسِ حَتَّى يَلْحَقَ الْحَيَّ جُرْهُمَا",
                    "فَلَا تَعْذُلَانِي قَدْ بَذَلْتُ نَصِيحَتِي ... وَكُلُّ امْرِئٍ يَجْرِي إِلَى مَا قُدِّرَ لَهُ",
                    "وَمَا الْمَالُ فَاعْلَمْ غَيْرَ نَفْعٍ يَنَالُهُ ... فَتًى هَالِكٌ إِمَّا أَسَى وَإِمَّا تَنَعَّمَا",
                    "وَلَكِنَّ نَفْسِي غَيْرُ نَفْسِ مُذَمَّمٍ ... إِذَا الْمَوْتُ لَمْ يَتْرُكْ لِذِي الْوُدِّ مَأْثَمَا",
                    "وَإِنَّ غَوِيًّا لَوْ رَشَدْتُمْ غَوَايَةً ... لَكَانَ لَكُمْ يَوْمًا مِنَ الدَّهْرِ أَحْزَمَا"
                ],
                explanations: [
                    "المعنى: يصف الشاعر أخاه خالداً بأنه لم يكن متردداً ولا متمهلاً في يوم الحرب، بل كان مقداماً شجاعاً.",
                    "المعنى: يخاطب الشاعر أخاه خالداً محذراً إياه من العجلة، ومبيناً أن التسرع قد يؤدي إلى الندم.",
                    "المعنى: يبين الشاعر أن أخاه لم يستجب لندائه ونصحه، وكأنه أصم عن سماع أي كلام غير ما عزم عليه.",
                    "المعنى: يصف الشاعر أن ما حال دون منع أخيه من التقدم هو الرماح الزرقاء التي كانت تهتز وتتمايل.",
                    "المعنى: يطلب الشاعر من الأعداء أن يفسحوا له الطريق، مؤكداً أنه محارب شجاع إذا اشتدت الحرب مضى فيها قدماً.",
                    "المعنى: يصف الشاعر خيل الأعداء وكثرتها، مشبهاً إياها بأسراب القطا في المناطق الصعبة.",
                    "المعنى: يصف كيف هجم بخيله على العدو حتى تفرق جمعهم، مشبهاً تفرقهم بتطاير سرب القطا عندما يواجه خطراً.",
                    "المعنى: يقول الشاعر أن أخاه لو استمع لندائه ونصحه لنجا، ولكنه أراد التقدم والمواجهة.",
                    "المعنى: يقول إن كان أخوه غوياً (ضالاً) قد لقي حتفه، فإنه لم يكن جباناً متردداً.",
                    "المعنى: يقسم الشاعر أنه يعلم أن من يولي ظهره للريح الدبور (يهرب) سيتبع من تقدم في الموت.",
                    "المعنى: يقول الشاعر إنه لم يكن يخشى أن يكون متأخراً عن الناس حتى يلحق قبيلة جرهم.",
                    "المعنى: يطلب من اللائمين ألا يلوموه لأنه قد بذل نصيحته، مؤكداً أن كل إنسان يجري إلى ما قُدر له.",
                    "المعنى: يؤكد الشاعر أن المال ليس إلا منفعة يحصل عليها الإنسان قبل موته، سواء حزن أو تنعم.",
                    "المعنى: يفتخر الشاعر بنفسه التي لا تقبل الذم، خاصة عندما لا يترك الموت للمحب ذنباً يُلام عليه.",
                    "المعنى: يختم الشاعر بأن من يسمونه ضالاً (غوياً) لو اتبعتم ضلالته لكان ذلك أكثر حزماً وحكمة لكم."
                ]
            },
            {
                title: "هم الأنصار (كعب بن زهير)",
                category: "شرح",
                verses: [
                    "مَنْ سَرَّهُ كَرَمُ الحَياةِ فَلا يَزَلْ ... في مِقْنَبٍ مِنْ صالِحِي الأَنْصارِ",
                    "تَرِثُ الجِبالَ رَزانَةً أَحْلامُهُمْ ... وأَكُفُّهُمْ خَلَفٌ مِنَ الأَمْطارِ",
                    "المُكْرِهِينَ السَّمْهَرِيَّ بِأَذْرُعٍ ... كَصَواقِلِ الهِنْدِيِّ غَيْرَ قِصارِ",
                    "والنَّاظِرِينَ بِأَعْيُنٍ مُحْمَرَّةٍ ... كالجَمْرِ غَيْرَ كَلِيلَةِ الأَبْصارِ",
                    "والنَّازِلِينَ النَّاسَ عَنْ أَدْيانِهِمْ ... بِالمُشْرِفِيِّ وبِالقَنا الخَطَّارِ",
                    "والبَاذِلِينَ نُفُوسَهُمْ لِنَبِيِّهِمْ ... يَوْمَ الهِياجِ وَفِتْنَةَ الجَبَّارِ",
                    "دَرَبُوا كما دَرِبَتْ أُسُودُ حَفِيَّةٍ ... عَادٍ الرَّقابِ مِنَ الأُسُودِ ضَوَارِي",
                    "وَهُمُ إِذا خَوَتِ النُّجُومُ وأَمْحَلُوا ... لِلطَّائِفِينَ السَّائِلِينَ مَقارِي"
                ],
                explanations: [
                    "المعنى: يقول الشاعر إن من أراد حياة كريمة شريفة فعليه أن يكون في جماعة من صالحي الأنصار.",
                    "المعنى: يصف عقولهم بأنها راجحة ثابتة كالجبال في رزانتها، وأياديهم بالكرم كأنها بديل عن الأمطار في العطاء.",
                    "المعنى: يصف قوتهم في القتال، فهم يثنون الرماح الصلبة بأذرع قوية طويلة تشبه السيوف الهندية المصقولة.",
                    "المعنى: يصف نظراتهم في الحرب بأنها محمرة من شدة الغضب والحماس، تشبه الجمر المتقد، وهي حادة نافذة.",
                    "المعنى: يصف كيف أنهم يجبرون الناس على ترك دياناتهم القديمة بقوة سيوفهم المشرفية ورماحهم المهتزة.",
                    "المعنى: يمدحهم بأنهم يضحون بأرواحهم في سبيل نصرة نبيهم وقت الحرب والفتن العظيمة.",
                    "المعنى: يشبههم بالأسود المتمرسة في القتال، فهم كالأسود الضارية القوية الرقاب التي اعتادت الصيد.",
                    "المعنى: يصفهم بالكرم حتى في أوقات القحط والجدب، فهم ملجأ للطائفين والسائلين يقدمون لهم الطعام والشراب."
                ]
            },
            {
                title: "في الفخر والمدح (النابغة الجعدي)",
                category: "شرح",
                verses: [
                    // ... verses ...
                ],
                explanations: [
                    // ... explanations ...
                ]
            },
            {
                title: "كتاب عمر بن الخطاب إلى أبي موسى الأشعري (في القضاء)",
                category: "رسائل",
                verses: [
                    "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ مِنْ عَبْدِ اللَّهِ عُمَرَ بْنِ الْخَطَّابِ أَمِيرِ الْمُؤْمِنِينَ إِلَى عَبْدِ اللَّهِ بْنِ قَيْسٍ – سَلَامٌ عَلَيْكَ أَمَّا بَعْدُ فَإِنَّ الْقَضَاءَ فَرِيضَةٌ مُحْكَمَةٌ وَسُنَّةٌ مُتَّبَعَةٌ ، فَافْهَمْ إِذَا أُدْلِيَ إِلَيْكَ ، وَانْفِذْ إِذَا تَبَيَّنَ لَكَ فَإِنَّهُ لَا يَنْفَعُ تَكَلُّمٌ بِحَقٍّ لَا نَفَاذَ لَهُ ، آسِ بَيْنَ النَّاسِ فِي وَجْهِكَ وَعَدْلِكَ وَمَجْلِسِكَ حَتَّى لَا يَطْمَعَ شَرِيفٌ فِي حَيْفِكَ ، وَلَا يَيْأَسَ ضَعِيفٌ مِنْ عَدْلِكَ .",
                    "الْبَيِّنَةُ عَلَى مَنِ ادَّعَى ، وَالْيَمِينُ عَلَى مَنْ أَنْكَرَ ، وَالصُّلْحُ جَائِزٌ بَيْنَ الْمُسْلِمِينَ إِلَّا صُلْحًا أَحَلَّ حَرَامًا أَوْ حَرَّمَ حَلَالًا ، وَلَا يَمْنَعْكَ قَضَاءٌ قَضَيْتَهُ الْيَوْمَ فَرَاجَعْتَ فِيهِ عَقْلَكَ وَهُدِيتَ فِيهِ لِرُشْدِكَ أَنْ تَرْجِعَ إِلَى الْحَقِّ فَإِنَّ الْحَقَّ قَدِيمٌ وَمُرَاجَعَةُ الْحَقِّ خَيْرٌ مِنَ التَّمَادِي فِي الْبَاطِلِ .",
                    "الْفَهْمَ الْفَهْمَ فِيمَا يَخْتَلِجُ فِي صَدْرِكَ مِمَّا لَيْسَ فِي كِتَابِ اللَّهِ وَسُنَّةِ النَّبِيِّ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ ثُمَّ اعْرِفِ الْأَشْبَاهَ وَالْأَمْثَالَ ، فَقِسِ الْأُمُورَ عِنْدَ ذَلِكَ بِنَظَائِرِهَا ، وَاعْمِدْ إِلَى أَقْرَبِهَا إِلَى اللَّهِ تَعَالَى وَأَشْبَهِهَا بِالْحَقِّ ، وَاجْعَلْ لِمَنِ ادَّعَى حَقًّا غَائِبًا أَوْ بَيِّنَةً أَمَدًا يَنْتَهِي إِلَيْهِ فَإِنْ أَحْضَرَ بَيِّنَةً أَخَذْتَ لَهُ بِحَقِّهِ ، وَإِلَّا اسْتَحْلَلْتَ عَلَيْهِ الْقَضِيَّةَ فَإِنَّ ذَلِكَ أَنْفَى لِلشَّكِّ وَأَجْلَى لِلْعَمَى ، وَأَبْلَغُ فِي الْعُذْرِ .",
                    "الْمُسْلِمُونَ عُدُولٌ بَعْضُهُمْ عَلَى بَعْضٍ إِلَّا مَجْلُودًا فِي حَدٍّ ، أَوْ مُجَرَّبًا عَلَيْهِ شَهَادَةَ زُورٍ ، أَوْ ظَنِينًا فِي وَلَاءٍ أَوْ نَسَبٍ فَإِنَّ اللَّهَ قَدْ تَوَلَّى مِنْكُمْ السَّرَائِرَ ، وَدَرَأَ بِالْبَيِّنَاتِ وَالْأَيْمَانِ وَإِيَّاكَ وَالْغَضَبَ وَالْقَلَقَ وَالضَّجَرَ وَالتَّأَذِّيَ بِالْخُصُومِ ، وَالتَّنَكُّرَ عِنْدَ الْخُصُومَاتِ ، فَإِنَّ الْحَقَّ فِي مَوَاطِنِ الْحَقِّ ، يُعَظِّمُ اللَّهُ بِهِ الْأَجْرَ ، وَيُحْسِنُ عَلَيْهِ الذُّخْرَ فَمَنْ صَحَّتْ نِيَّتُهُ ، وَأَقْبَلَ عَلَى نَفْسِهِ ، كَفَاهُ اللَّهُ مَا بَيْنَهُ وَبَيْنَ النَّاسِ ، وَمَنْ تَحَلَّى لِلنَّاسِ بِمَا يَعْلَمُ اللَّهُ أَنَّهُ لَيْسَ مِنْ نَفْسِهِ ، شَانَهُ اللَّهُ ، فَمَا ظَنُّكَ بِثَوَابِ عِنْدَ اللَّهِ عَزَّ وَجَلَّ فِي عَاجِلِ رِزْقِهِ وَخَزَائِنِ رَحْمَتِهِ ، وَالسَّلَامُ ."
                ],
                explanations: [
                    "المعنى: يبدأ عمر رضي الله عنه رسالته بالبسملة والتحية، ثم يبين أن القضاء فريضة محكمة وسنة متبعة، ويوجه أبا موسى إلى فهم القضية عند عرضها عليه، وتنفيذ الحكم عند وضوحه، لأن الحق بلا تنفيذ لا فائدة منه. كما يأمره بالمساواة بين الناس في المعاملة والعدل والمجلس.",
                    "المعنى: يوضح القواعد الأساسية في القضاء: البينة على المدعي واليمين على من أنكر، وجواز الصلح بين المسلمين إلا ما أحل حراماً أو حرم حلالاً. كما يبين أن مراجعة الحكم والرجوع إلى الحق خير من الاستمرار في الباطل.",
                    "المعنى: يوجه إلى التفكر والفهم فيما ليس فيه نص من كتاب الله وسنة نبيه، وذلك بالقياس على النظائر والأشباه، واختيار أقربها إلى الله وأشبهها بالحق. كما يوجه إلى تحديد مهلة للمدعي لإحضار بينته الغائبة.",
                    "المعنى: يبين أن المسلمين عدول في الشهادة إلا من جُلد في حد أو جُرب عليه شهادة زور أو متهم في ولاء أو نسب. ويحذر من الغضب والقلق والضجر في مجلس القضاء، ويبين أن من صحت نيته كفاه الله، ومن تظاهر بغير حقيقته فضحه الله."
                ]
            }
        ];

        function Verse({ verse, index, memorized, toggleMemorized, speakVerse, isPlayingAll, settings, poem }) {
            const [isPlaying, setIsPlaying] = React.useState(false);
            const [showExplanation, setShowExplanation] = React.useState(false);
            const audioRef = React.useRef(null);

            const verseStyle = {
                backgroundColor: memorized ? '#f0fff4' : settings.verseBackground,
            };

            const textStyle = {
                fontSize: `${settings.fontSize}rem`,
            };

            const handlePlayClick = async (e) => {
                e.stopPropagation();
                
                if (isPlaying) {
                    setIsPlaying(false);
                    stopPlayback();
                } else {
                    setIsPlaying(true);
                    try {
                        await speakVerse(verse, setIsPlaying);
                    } catch (error) {
                        console.error('Error playing verse:', error);
                        setIsPlaying(false);
                    }
                }
            };

            React.useEffect(() => {
                return () => {
                    setIsPlaying(false);
                    if (window.stopAllAudio) {
                        window.stopAllAudio();
                    }
                };
            }, []);

            return (
                <div className={`verse ${memorized ? 'memorized' : ''}`} style={verseStyle}>
                    <div className="flex flex-col gap-4">
                        <p className="text-center" style={textStyle}>{verse}</p>
                        <div className="flex justify-center space-x-3">
                            <button
                                onClick={handlePlayClick}
                                className={`px-4 py-2 ${isPlaying ? 'bg-red-500 hover:bg-red-600' : 'bg-blue-500 hover:bg-blue-600'} text-white rounded-lg transition-colors duration-200`}
                                disabled={isPlayingAll}
                            >
                                {isPlaying ? 'إيقاف' : 'تشغيل الصوت'}
                            </button>
                            <button
                                onClick={(e) => { e.stopPropagation(); toggleMemorized(index); }}
                                className={`px-4 py-2 ${memorized ? 'bg-green-600' : 'bg-green-500'} text-white rounded-lg hover:bg-green-600 transition-colors duration-200`}
                            >
                                {memorized ? 'إلغاء الحفظ' : 'تم الحفظ'}
                            </button>
                            <button
                                onClick={() => setShowExplanation(!showExplanation)}
                                className="verse-explanation-toggle"
                            >
                                {showExplanation ? 'إخفاء الشرح' : 'عرض الشرح'}
                            </button>
                        </div>
                        {showExplanation && poem.explanations && poem.explanations[index] && (
                            <div className="verse-explanation mt-2 p-2 bg-gray-50 rounded">
                                {poem.explanations[index]}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function Poem({ poem, memorizedVerses, updateMemorizedState, settings }) {
            const [ttsRate, setTtsRate] = React.useState(1.0);
            const [wordDelay, setWordDelay] = React.useState(0);
            const [isPlayingAll, setIsPlayingAll] = React.useState(false);
            const [currentAudio, setCurrentAudio] = React.useState(null);
            const timeoutRef = React.useRef(null);
            const isMounted = React.useRef(true);
            const allAudioRefs = React.useRef([]);

            React.useEffect(() => {
                return () => {
                    isMounted.current = false;
                    stopPlayback();
                };
            }, []);

            // تعريف وظيفة الإيقاف الفعالة
            React.useEffect(() => {
                window.stopAllAudio = function() {
                    console.log("STOPPING ALL AUDIO");
                    
                    // إيقاف جميع عناصر الصوت في الصفحة
                    const sounds = document.querySelectorAll('audio');
                    sounds.forEach(sound => {
                        try {
                            sound.pause();
                            sound.src = '';
                            sound.remove();
                        } catch (e) {}
                    });
                    
                    // إيقاف المؤقتات
                    if (timeoutRef.current) {
                        clearTimeout(timeoutRef.current);
                        timeoutRef.current = null;
                    }
                    
                    // تفريغ المراجع
                    allAudioRefs.current = [];
                    
                    // إعادة تعيين الحالة
                    setIsPlayingAll(false);
                };
                
                return () => {
                    delete window.stopAllAudio;
                };
            }, []);

            const stopPlayback = () => {
                if (window.stopAllAudio) {
                    window.stopAllAudio();
                }
            };
            
            // طريقة جديدة تماماً لتشغيل الكلمات مع دعم أفضل للتأخير
            const speakText = async (text, rate, delayAfter = 0) => {
                return new Promise((resolve, reject) => {
                    // تنظيف النص من علامات التشكيل والرموز الخاصة
                    let processedText = text
                        .replace(/\*/g, '') // إزالة علامات النجمة
                        .replace(/\s+/g, ' ') // توحيد المسافات
                        .trim();

                    // تقسيم النص الطويل إلى أجزاء أصغر
                    const maxLength = 150;
                    const textChunks = [];
                    
                    // إذا كان النص شعراً (يحتوي على علامة *)، نقسمه عند الشطرين
                    if (text.includes('*')) {
                        const parts = text.split('*');
                        if (parts.length === 2) {
                            textChunks.push(parts[0].trim());
                            textChunks.push(parts[1].trim());
                        } else {
                            textChunks.push(processedText);
                        }
                    } else {
                        let remainingText = processedText;
                        while (remainingText.length > 0) {
                            let chunk = remainingText.substring(0, maxLength);
                            const lastPunctuation = Math.max(
                                chunk.lastIndexOf('،'),
                                chunk.lastIndexOf('.')
                            );
                            
                            if (lastPunctuation > 0 && remainingText.length > maxLength) {
                                chunk = remainingText.substring(0, lastPunctuation + 1);
                            }
                            
                            textChunks.push(chunk);
                            remainingText = remainingText.substring(chunk.length);
                        }
                    }

                    const playChunks = async (index = 0) => {
                        if (index >= textChunks.length) {
                            resolve();
                            return;
                        }

                        const audio = new Audio();
                        
                        const handleEnded = async () => {
                            audio.removeEventListener('ended', handleEnded);
                            const nextIndex = index + 1;
                            
                            // إزالة الصوت الحالي من القائمة
                            const audioIndex = allAudioRefs.current.indexOf(audio);
                            if (audioIndex > -1) {
                                allAudioRefs.current.splice(audioIndex, 1);
                            }

                            if (nextIndex < textChunks.length) {
                                await new Promise(r => setTimeout(r, 800)); // زيادة التأخير بين الأجزاء
                                await playChunks(nextIndex);
                            } else if (delayAfter > 0 && isMounted.current) {
                                await new Promise(r => setTimeout(r, delayAfter));
                                resolve();
                            } else {
                                resolve();
                            }
                        };

                        const handleError = (e) => {
                            console.error("Audio playback error:", e);
                            const audioIndex = allAudioRefs.current.indexOf(audio);
                            if (audioIndex > -1) {
                                allAudioRefs.current.splice(audioIndex, 1);
                            }
                            reject(e);
                        };

                        audio.addEventListener('ended', handleEnded);
                        audio.addEventListener('error', handleError);

                        allAudioRefs.current.push(audio);
                        setCurrentAudio(audio);

                        const chunk = textChunks[index].trim();
                        if (chunk) {
                            audio.src = `https://translate.google.com/translate_tts?ie=UTF-8&tl=ar&client=tw-ob&q=${encodeURIComponent(chunk)}`;
                            audio.playbackRate = rate;

                            try {
                                await audio.play();
                            } catch (e) {
                                handleError(e);
                            }
                        } else {
                            // تخطي الأجزاء الفارغة
                            await playChunks(index + 1);
                        }
                    };

                    playChunks();
                });
            };
            
            // دالة جديدة لتشغيل بيت كامل
            const speakVerse = async (verse, setVerseIsPlaying) => {
                if (isPlayingAll) return;
                
                stopPlayback();
                setVerseIsPlaying(true);
                
                try {
                    if (wordDelay > 0) {
                        // تقسيم البيت إلى شطرين
                        const parts = verse.split('*');
                        for (const part of parts) {
                            if (!isMounted.current || !setVerseIsPlaying) break;
                            
                            const words = part.trim().split(' ').filter(word => word.trim());
                            for (const word of words) {
                                if (!isMounted.current || !setVerseIsPlaying) break;
                                await speakText(word, ttsRate, wordDelay);
                            }
                            // تأخير إضافي بين الشطرين
                            if (parts.indexOf(part) === 0) {
                                await new Promise(r => setTimeout(r, 1000));
                            }
                        }
                    } else {
                        await speakText(verse, ttsRate);
                    }
                } catch (error) {
                    console.error('Error in speakVerse:', error);
                } finally {
                    if (isMounted.current && setVerseIsPlaying) {
                        setVerseIsPlaying(false);
                    }
                }
            };
            
            // دالة جديدة لتشغيل جميع الأبيات
            const speakAllVerses = async () => {
                if (isPlayingAll) {
                    stopPlayback();
                    setIsPlayingAll(false);
                    return;
                }
                
                setIsPlayingAll(true);
                
                try {
                    for (let i = 0; i < poem.verses.length; i++) {
                        if (!isMounted.current || !isPlayingAll) break;
                        
                        const verse = poem.verses[i];
                        await speakVerse(verse);
                        
                        // تأخير بين الأبيات
                        if (i < poem.verses.length - 1) {
                            await new Promise(r => setTimeout(r, 1500));
                        }
                    }
                } catch (error) {
                    console.error('Error in speakAllVerses:', error);
                } finally {
                    if (isMounted.current) {
                        setIsPlayingAll(false);
                    }
                }
            };

            // إضافة useEffect لإيقاف التشغيل عند تغيير القصيدة
            React.useEffect(() => {
                stopPlayback();
            }, [poem]);

            const toggleMemorized = (index) => {
                updateMemorizedState(poem.title, index, !memorizedVerses[index]);
            };

            const memorizedCount = memorizedVerses.filter(Boolean).length;
            const progress = (memorizedCount / poem.verses.length) * 100;

            return (
                <div className="poem-container">
                    <h2 className="poem-title">{poem.title}</h2>
                    <div className="tts-controls">
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div className="col-span-2 flex justify-center mb-4">
                                <button
                                    onClick={speakAllVerses}
                                    className={`px-6 py-2 ${isPlayingAll ? 'bg-red-500 hover:bg-red-600' : 'bg-blue-500 hover:bg-blue-600'} text-white rounded-lg transition-colors duration-200 text-lg font-bold`}
                                >
                                    {isPlayingAll ? 'إيقاف القراءة' : 'قراءة القصيدة كاملة'}
                                </button>
                            </div>
                            <label className="block">
                                <span className="text-sm font-medium mb-1 block">سرعة القراءة:</span>
                                <input
                                    type="range"
                                    min="0.5"
                                    max="2.0"
                                    step="0.1"
                                    value={ttsRate}
                                    onChange={(e) => {
                                        stopPlayback();
                                        setTtsRate(parseFloat(e.target.value));
                                    }}
                                    className="w-full"
                                />
                                <span className="text-sm">{ttsRate.toFixed(1)}x</span>
                            </label>
                            <label className="block">
                                <span className="text-sm font-medium mb-1 block">تأخير بين الكلمات (مللي ثانية):</span>
                                <div className="flex flex-col gap-2">
                                    <div className="flex justify-between items-center">
                                        <div className="flex items-center">
                                            <button 
                                                className="px-3 py-1 bg-gray-100 hover:bg-gray-200 border rounded-r-none border-r-0"
                                                onClick={() => {
                                                    stopPlayback();
                                                    setWordDelay(Math.max(0, wordDelay - 10));
                                                }}
                                            >-10</button>
                                            <button 
                                                className="px-3 py-1 bg-gray-100 hover:bg-gray-200 border border-r-0"
                                                onClick={() => {
                                                    stopPlayback();
                                                    setWordDelay(Math.max(0, wordDelay - 1));
                                                }}
                                            >-1</button>
                                            <input 
                                                type="number" 
                                                value={wordDelay}
                                                onChange={(e) => {
                                                    stopPlayback();
                                                    const val = parseInt(e.target.value);
                                                    if (!isNaN(val) && val >= 0 && val <= 3000) {
                                                        setWordDelay(val);
                                                    }
                                                }}
                                                className="w-20 text-center border px-2 py-1"
                                                min={0}
                                                max={3000}
                                                step={1}
                                            />
                                            <button 
                                                className="px-3 py-1 bg-gray-100 hover:bg-gray-200 border border-l-0"
                                                onClick={() => {
                                                    stopPlayback();
                                                    setWordDelay(Math.min(3000, wordDelay + 1));
                                                }}
                                            >+1</button>
                                            <button 
                                                className="px-3 py-1 bg-gray-100 hover:bg-gray-200 border rounded-l-none border-l-0"
                                                onClick={() => {
                                                    stopPlayback();
                                                    setWordDelay(Math.min(3000, wordDelay + 10));
                                                }}
                                            >+10</button>
                                        </div>
                                    </div>
                                    <div className="flex items-center">
                                        <span className="text-sm ml-2">0</span>
                                        <input
                                            type="range"
                                            min="0"
                                            max="3000"
                                            step="1"
                                            value={wordDelay}
                                            onChange={(e) => {
                                                stopPlayback();
                                                setWordDelay(parseInt(e.target.value));
                                            }}
                                            className="w-full"
                                        />
                                        <span className="text-sm mr-2">3000</span>
                                    </div>
                                    <div className="flex justify-center text-sm font-bold">
                                        التأخير الحالي: {wordDelay} مللي ثانية
                                    </div>
                                    <div className="flex justify-center gap-2 mt-2 flex-wrap">
                                        <button 
                                            className="px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs"
                                            onClick={() => {
                                                stopPlayback();
                                                setWordDelay(50);
                                            }}
                                        >50 مللي ثانية</button>
                                        <button 
                                            className="px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs"
                                            onClick={() => {
                                                stopPlayback();
                                                setWordDelay(100);
                                            }}
                                        >100 مللي ثانية</button>
                                        <button 
                                            className="px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs"
                                            onClick={() => {
                                                stopPlayback();
                                                setWordDelay(150);
                                            }}
                                        >150 مللي ثانية</button>
                                        <button 
                                            className="px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs"
                                            onClick={() => {
                                                stopPlayback();
                                                setWordDelay(200);
                                            }}
                                        >200 مللي ثانية</button>
                                        <button 
                                            className="px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs"
                                            onClick={() => {
                                                stopPlayback();
                                                setWordDelay(250);
                                            }}
                                        >250 مللي ثانية</button>
                                        <button 
                                            className="px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs"
                                            onClick={() => {
                                                stopPlayback();
                                                setWordDelay(300);
                                            }}
                                        >300 مللي ثانية</button>
                                        <button 
                                            className="px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs"
                                            onClick={() => {
                                                stopPlayback();
                                                setWordDelay(400);
                                            }}
                                        >400 مللي ثانية</button>
                                        <button 
                                            className="px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs"
                                            onClick={() => {
                                                stopPlayback();
                                                setWordDelay(500);
                                            }}
                                        >500 مللي ثانية</button>
                                        <button 
                                            className="px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs"
                                            onClick={() => {
                                                stopPlayback();
                                                setWordDelay(1000);
                                            }}
                                        >1 ثانية</button>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <div className="mt-4 flex justify-center">
                            <button
                                onClick={speakAllVerses}
                                className={`px-6 py-2 ${isPlayingAll ? 'bg-red-500 hover:bg-red-600' : 'bg-purple-500 hover:bg-purple-600'} text-white rounded-lg transition-colors duration-200 text-sm sm:text-base`}
                            >
                                {isPlayingAll ? 'إيقاف الكل' : 'تشغيل صوت الكل'}
                            </button>
                        </div>
                    </div>
                    <div className="mb-4 sm:mb-6">
                        <p className="text-center mb-2 text-sm sm:text-base">تقدم الحفظ: {memorizedCount} / {poem.verses.length}</p>
                        <div className="progress-bar">
                            <div
                                className="progress-bar-fill"
                                style={{ width: `${progress}%` }}
                            ></div>
                        </div>
                    </div>
                    {poem.verses.map((verse, index) => (
                        <Verse
                            key={index}
                            verse={verse}
                            index={index}
                            memorized={memorizedVerses[index]}
                            toggleMemorized={toggleMemorized}
                            speakVerse={speakVerse}
                            isPlayingAll={isPlayingAll}
                            audioRef={allAudioRefs.current[index]}
                            settings={settings}
                            poem={poem}
                        />
                    ))}
                </div>
            );
        }

        function App() {
            const [selectedPoem, setSelectedPoem] = React.useState(poems[0]);
            const [category, setCategory] = React.useState("حفظ");
            const [showSettings, setShowSettings] = React.useState(false);
            const [settings, setSettings] = React.useState(() => {
                const savedSettings = localStorage.getItem('poemSettings');
                return savedSettings ? JSON.parse(savedSettings) : {
                    fontSize: 1.25, // rem
                    verseBackground: '#ffffff',
                    pageBackground: '#f4f4f9'
                };
            });
            const [memorizedStates, setMemorizedStates] = React.useState(
                poems.reduce((acc, poem) => {
                    acc[poem.title] = new Array(poem.verses.length).fill(false);
                    return acc;
                }, {})
            );

            // حفظ الإعدادات في التخزين المحلي
            React.useEffect(() => {
                localStorage.setItem('poemSettings', JSON.stringify(settings));
                document.body.style.backgroundColor = settings.pageBackground;
            }, [settings]);

            const filteredPoems = poems.filter(poem => poem.category === category);

            // تحديث القصيدة المختارة عند تغيير القسم
            React.useEffect(() => {
                if (filteredPoems.length > 0) {
                    setSelectedPoem(filteredPoems[0]);
                }
            }, [category]);

            const updateMemorizedState = (poemTitle, index, state) => {
                setMemorizedStates(prev => {
                    const newState = {...prev};
                    newState[poemTitle][index] = state;
                    return newState;
                });
            };

            const updateSetting = (key, value) => {
                setSettings(prev => ({
                    ...prev,
                    [key]: value
                }));
            };

            return (
                <div className="min-h-screen p-4 sm:p-6 max-w-full">
                    <h1 className="text-2xl sm:text-3xl font-bold text-center mb-6 sm:mb-8">موقع حفظ القصائد</h1>
                    
                    <div className="flex flex-col sm:flex-row sm:justify-center gap-2 sm:gap-4 mb-4 sm:mb-6">
                        <button
                            onClick={() => setCategory("حفظ")}
                            className={`px-4 py-2 rounded w-full sm:w-auto ${category === "حفظ" ? "bg-blue-600 text-white" : "bg-gray-200"}`}
                        >
                            قصائد الحفظ
                        </button>
                        <button
                            onClick={() => setCategory("شرح")}
                            className={`px-4 py-2 rounded w-full sm:w-auto ${category === "شرح" ? "bg-blue-600 text-white" : "bg-gray-200"}`}
                        >
                            قصائد الشرح
                        </button>
                        <button
                            onClick={() => setCategory("رسائل")}
                            className={`px-4 py-2 rounded w-full sm:w-auto ${category === "رسائل" ? "bg-blue-600 text-white" : "bg-gray-200"}`}
                        >
                            الرسائل
                        </button>
                        <button
                            onClick={() => setShowSettings(!showSettings)}
                            className={`px-4 py-2 rounded w-full sm:w-auto ${showSettings ? "bg-blue-600 text-white" : "bg-gray-200"}`}
                        >
                            الإعدادات
                        </button>
                    </div>

                    {showSettings && (
                        <div className="bg-white rounded-lg shadow-md p-4 mb-6">
                            <h2 className="text-xl font-bold mb-4 text-center">إعدادات التخصيص</h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label className="block text-sm font-medium mb-2">حجم النص</label>
                                    <div className="flex items-center">
                                        <span className="ml-2 text-sm">صغير</span>
                                        <input
                                            type="range"
                                            min="0.8"
                                            max="2"
                                            step="0.1"
                                            value={settings.fontSize}
                                            onChange={(e) => updateSetting('fontSize', parseFloat(e.target.value))}
                                            className="w-full"
                                        />
                                        <span className="mr-2 text-sm">كبير</span>
                                    </div>
                                    <div className="text-center mt-1 text-sm">
                                        {settings.fontSize.toFixed(1)}
                                    </div>
                                </div>
                                <div>
                                    <label className="block text-sm font-medium mb-2">لون خلفية البيت</label>
                                    <input
                                        type="color"
                                        value={settings.verseBackground}
                                        onChange={(e) => updateSetting('verseBackground', e.target.value)}
                                        className="w-full h-10 cursor-pointer"
                                    />
                                    <div className="flex mt-2">
                                        <button
                                            onClick={() => updateSetting('verseBackground', '#ffffff')}
                                            className="bg-gray-200 text-xs px-2 py-1 ml-1 rounded"
                                        >
                                            افتراضي
                                        </button>
                                        <button
                                            onClick={() => updateSetting('verseBackground', '#f0f7ff')}
                                            className="bg-blue-100 text-xs px-2 py-1 ml-1 rounded"
                                        >
                                            أزرق فاتح
                                        </button>
                                        <button
                                            onClick={() => updateSetting('verseBackground', '#fff8e1')}
                                            className="bg-yellow-100 text-xs px-2 py-1 rounded"
                                        >
                                            أصفر فاتح
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <label className="block text-sm font-medium mb-2">لون خلفية الصفحة</label>
                                    <input
                                        type="color"
                                        value={settings.pageBackground}
                                        onChange={(e) => updateSetting('pageBackground', e.target.value)}
                                        className="w-full h-10 cursor-pointer"
                                    />
                                    <div className="flex mt-2">
                                        <button
                                            onClick={() => updateSetting('pageBackground', '#f4f4f9')}
                                            className="bg-gray-200 text-xs px-2 py-1 ml-1 rounded"
                                        >
                                            افتراضي
                                        </button>
                                        <button
                                            onClick={() => updateSetting('pageBackground', '#f7f7f7')}
                                            className="bg-white text-xs border px-2 py-1 ml-1 rounded"
                                        >
                                            أبيض
                                        </button>
                                        <button
                                            onClick={() => updateSetting('pageBackground', '#f0f7ff')}
                                            className="bg-blue-100 text-xs px-2 py-1 rounded"
                                        >
                                            أزرق فاتح
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="dropdown flex justify-center mb-4 sm:mb-6">
                        <select
                            value={selectedPoem.title}
                            onChange={(e) => {
                                const poem = poems.find(p => p.title === e.target.value);
                                setSelectedPoem(poem);
                            }}
                            className="p-2 border rounded w-full sm:w-3/4 text-sm sm:text-base"
                        >
                            {filteredPoems.map(poem => (
                                <option key={poem.title} value={poem.title}>
                                    {poem.title}
                                </option>
                            ))}
                        </select>
                    </div>

                    <Poem 
                        poem={selectedPoem} 
                        memorizedVerses={memorizedStates[selectedPoem.title]} 
                        updateMemorizedState={updateMemorizedState}
                        settings={settings}
                    />
                </div>
            );
        }

        // بناء مكون للإدخال الرقمي الدقيق
        const NumericInput = ({ value, onChange, step, min, max, label }) => {
            return (
                <div className="flex items-center">
                    <span className="text-sm">{label}:</span>
                    <div className="flex items-center mx-2 border rounded">
                        <button 
                            className="px-2 py-1 bg-gray-100 hover:bg-gray-200"
                            onClick={() => onChange(Math.max(min, value - step))}
                        >-</button>
                        <input 
                            type="number" 
                            value={value}
                            onChange={(e) => {
                                const val = parseFloat(e.target.value);
                                if (!isNaN(val) && val >= min && val <= max) {
                                    onChange(val);
                                }
                            }}
                            className="w-16 text-center"
                            min={min}
                            max={max}
                            step={step}
                        />
                        <button 
                            className="px-2 py-1 bg-gray-100 hover:bg-gray-200"
                            onClick={() => onChange(Math.min(max, value + step))}
                        >+</button>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
